@model MovieDetailsViewModel 

@* back-drop section *@
@if(Model.Movie.BackdropPath is null)
{
    <div class="no-hero">

    </div>
}
else
{
    <div class="hero">
        <img src="https://image.tmdb.org/t/p/original/@Model.Movie.BackdropPath" alt="@Model.Movie.Title Backdrop image"/>
    </div>
}

@* film-details section *@
<div class="container">
    <div class="film-content">
        <aside>
            <div class="poster-card">
                <div class="poster">
                    <img src="https://image.tmdb.org/t/p/original/@Model.Movie.PosterPath" alt="@Model.Movie.Title Poster image"/>
                </div>
                @* social implementaion will do later *@
                <div class="social-movie-stats">
                    <div class="stat">
                        <span>👁</span>
                        <span></span>
                    </div>
                    <div class="stat">
                        <span>❤️</span>
                        <span></span>
                    </div>
                    <div class="stat">
                        <span>⭐</span>
                        <span></span>
                    </div>
                </div>
            </div>

            <div class="watch-section">
                <button class="watch-btn">▶ Trailer</button>
            </div>
        </aside>

        <main class="film-info">
            <h1 class="film-title">@Model.Movie.Title</h1>
            <div class="film-meta">
                <span>@Model.DisplayYear</span>
                <span>@Model.DisplayRunTime</span>
                <span>Directed by @Model.DisplayDirector</span>
            </div>
                
            <div class="tagline">@Model.DisplayTagLine</div>
                
            <p class="synopsis">
                @Model.DisplayOverview
            </p>

            <div class="movie-details-container">
                <component 
                    type="typeof(Tabs)" 
                    render-mode="ServerPrerendered"
                    param-CountryNames="@Model.CountryName"
                    param-MovieDetails="@Model.Movie"
                    param-MovieDates="@Model.ReleaseDates"
                    param-Crew = "@Model.Crew"
                    param-Cast = "@Model.Cast"
                />
            </div>

            @if (User.Identity != null && User.Identity.IsAuthenticated)
            {
                <div class="movie-action-container">
                    <div class="action-buttons">
                        <component 
                            type = "typeof(WatchButton)" 
                            render-mode = "ServerPrerendered"
                            param-MovieId = "@Model.Movie.Id"
                            param-Initial = "false"
                        />

                        <component 
                            type="typeof(LikeButton)"
                            render-mode="ServerPrerendered"
                            param-MovieId="@Model.Movie.Id"
                            param-Initial="false"
                        />

                        <component 
                            type="typeof(WatchListButton)"
                            render-mode="ServerPrerendered"
                            param-MovieId="@Model.Movie.Id"
                            param-Initial="false"
                        />
                    </div>
                </div>

                <div class="ratings-section">
                    <div class="user-rating-section">
                        <div class="section-title">Ratings</div>
                        <div class="star-rating">
                            <span class="star">☆</span>
                            <span class="star">☆</span>
                            <span class="star">☆</span>
                            <span class="star">☆</span>
                            <span class="star">☆</span>
                        </div>
                    </div>
                    <div class="average-rating-section">
                        <div class="rating-display">
                            <div class="rating-score">
                                @* will do later will be the rating of the users in the app *@
                                <span class="score-value">0</span>
                                <span class="score-divider">/</span>
                                <span class="score-max">5</span>
                            </div>

                            <div class="rating-visual">
                                <div class="rating-bars">
                                    <div class="bar" style="height: 35%;" data-votes="10: 35%"></div>
                                    <div class="bar" style="height: 65%;" data-votes="9: 65%"></div>
                                    <div class="bar" style="height: 95%;" data-votes="8: 95%"></div>
                                    <div class="bar" style="height: 75%;" data-votes="7: 75%"></div>
                                    <div class="bar" style="height: 45%;" data-votes="6: 45%"></div>
                                    <div class="bar" style="height: 25%;" data-votes="5: 25%"></div>
                                    <div class="bar" style="height: 15%;" data-votes="4: 15%"></div>
                                    <div class="bar" style="height: 8%;" data-votes="3: 8%"></div>
                                    <div class="bar" style="height: 5%;" data-votes="2: 5%"></div>
                                    <div class="bar" style="height: 3%;" data-votes="1: 3%"></div>
                                </div>

                                <div class="votes-info">
                                    Based on 1,234 votes
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            }
            else
            {
                <div class="deny-action">
                    <h1>Sign-in To Review</h1>
                </div>
            }
        </main>
    </div>
    <main>
        <h2 class="section-title">You might also like</h2>
        <div class="movies-recommendation-grid view-recommendation-grid">
            @foreach (var recommendation in Model.RecommendationCards)
            {
                <div class="movie-card">
                    <a class="movie-Details" asp-controller="MovieDetails" asp-action="Details" asp-route-id="@recommendation.Id">
                        <div class="movie-poster">
                            <img src="@recommendation.Poster" alt="@recommendation.Title">
                            <div class="movie-overlay"></div>
                            <div class="movie-info">
                                <div class="movie-year">@recommendation.Year</div>
                            </div>
                        </div>
                    </a>
                    <h3 class="movie-title serif">@recommendation.Title</h3>
                </div>
            }
        </div>
    </main>
</div>
